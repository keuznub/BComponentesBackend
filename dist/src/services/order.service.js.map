{"version":3,"sources":["../../../src/services/order.service.ts"],"sourcesContent":["import { PrismaClient, Order, OrderProduct } from \"@prisma/client\"\r\nimport { HttpException } from \"../exceptions/httpException\"\r\nconst prisma = new PrismaClient()\r\n\r\nexport class OrderService {\r\n\r\n    static async getAll() {\r\n        const findOrders = await prisma.order.findMany({ include: { orderProducts: true, user: { select: { id: true } } } })\r\n        if (!findOrders) throw new HttpException(404, \"Orders not found\")\r\n        return findOrders\r\n    }\r\n\r\n    static async getById(id: number) {\r\n        const findOrder = await prisma.order.findUnique({ where: { id } })\r\n        if (!findOrder) throw new HttpException(404, \"Order not found\")\r\n        return findOrder\r\n    }\r\n\r\n\r\n    static async save(orderProducts: OrderProduct[], idUser: number) {\r\n        return await prisma.order.create({\r\n            data: {\r\n                status:\"pending\",\r\n                idUser:idUser,\r\n                orderProducts:{createMany:{data : orderProducts}}\r\n            }\r\n        })\r\n    }\r\n\r\n\r\n    static async delete(id: number) {\r\n        const findOrder = await prisma.order.findUnique({ where: { id } })\r\n        if (!findOrder) throw new HttpException(404, \"Order not found\")\r\n        return await prisma.order.delete({ where: { id } })\r\n    }\r\n\r\n\r\n    static async update(order: Order) {\r\n        const { id } = order\r\n        const findOrder = await prisma.order.findUnique({ where: { id } })\r\n        if (!findOrder) throw new HttpException(404, \"Order not found\")\r\n        return await prisma.order.update({ where: { id }, data: { ...order } })\r\n    }\r\n\r\n\r\n}"],"names":["PrismaClient","HttpException","prisma","OrderService","getAll","findOrders","order","findMany","include","orderProducts","user","select","id","getById","findOrder","findUnique","where","save","idUser","create","data","status","createMany","delete","update"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,SAASA,YAAY,QAA6B,iBAAgB;AAClE,SAASC,aAAa,QAAQ,8BAA6B;AAC3D,IAAMC,SAAS,IAAIF;AAEnB,OAAO,IAAA,AAAMG,6BAAN;;aAAMA;gCAAAA;;kBAAAA;;YAEIC,KAAAA;mBAAb,SAAaA;uBAAb,oBAAA;wBACUC;;;;gCAAa;;oCAAMH,OAAOI,KAAK,CAACC,QAAQ,CAAC;wCAAEC,SAAS;4CAAEC,eAAe;4CAAMC,MAAM;gDAAEC,QAAQ;oDAAEC,IAAI;gDAAK;4CAAE;wCAAE;oCAAE;;;gCAA5GP,aAAa;gCACnB,IAAI,CAACA,YAAY,MAAM,IAAIJ,cAAc,KAAK;gCAC9C;;oCAAOI;;;;gBACX;;;;YAEaQ,KAAAA;mBAAb,SAAaA,QAAQD,EAAU;uBAA/B,oBAAA;wBACUE;;;;gCAAY;;oCAAMZ,OAAOI,KAAK,CAACS,UAAU,CAAC;wCAAEC,OAAO;4CAAEJ,IAAAA;wCAAG;oCAAE;;;gCAA1DE,YAAY;gCAClB,IAAI,CAACA,WAAW,MAAM,IAAIb,cAAc,KAAK;gCAC7C;;oCAAOa;;;;gBACX;;;;YAGaG,KAAAA;mBAAb,SAAaA,KAAKR,aAA6B,EAAES,MAAc;uBAA/D,oBAAA;;;;gCACW;;oCAAMhB,OAAOI,KAAK,CAACa,MAAM,CAAC;wCAC7BC,MAAM;4CACFC,QAAO;4CACPH,QAAOA;4CACPT,eAAc;gDAACa,YAAW;oDAACF,MAAOX;gDAAa;4CAAC;wCACpD;oCACJ;;;gCANA;;oCAAO;;;;gBAOX;;;;YAGac,KAAAA;mBAAb,SAAaA,QAAOX,EAAU;uBAA9B,oBAAA;wBACUE;;;;gCAAY;;oCAAMZ,OAAOI,KAAK,CAACS,UAAU,CAAC;wCAAEC,OAAO;4CAAEJ,IAAAA;wCAAG;oCAAE;;;gCAA1DE,YAAY;gCAClB,IAAI,CAACA,WAAW,MAAM,IAAIb,cAAc,KAAK;gCACtC;;oCAAMC,OAAOI,KAAK,CAACiB,MAAM,CAAC;wCAAEP,OAAO;4CAAEJ,IAAAA;wCAAG;oCAAE;;;gCAAjD;;oCAAO;;;;gBACX;;;;YAGaY,KAAAA;mBAAb,SAAaA,OAAOlB,KAAY;uBAAhC,oBAAA;wBACYM,IACFE;;;;gCADEF,KAAON,MAAPM;gCACU;;oCAAMV,OAAOI,KAAK,CAACS,UAAU,CAAC;wCAAEC,OAAO;4CAAEJ,IAAAA;wCAAG;oCAAE;;;gCAA1DE,YAAY;gCAClB,IAAI,CAACA,WAAW,MAAM,IAAIb,cAAc,KAAK;gCACtC;;oCAAMC,OAAOI,KAAK,CAACkB,MAAM,CAAC;wCAAER,OAAO;4CAAEJ,IAAAA;wCAAG;wCAAGQ,MAAM,mBAAKd;oCAAQ;;;gCAArE;;oCAAO;;;;gBACX;;;;WAtCSH;IAyCZ"}