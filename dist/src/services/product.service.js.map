{"version":3,"sources":["../../../src/services/product.service.ts"],"sourcesContent":["import { PrismaClient, Product  } from \"@prisma/client\"\r\nimport { HttpException } from \"../exceptions/httpException\"\r\nimport { create } from \"domain\"\r\nimport {prisma} from 'database/adapter'\r\n\r\nexport class ProductService{\r\n    \r\n    static async getAll(){\r\n        const findProducts = await prisma.product.findMany({include:{rates:true,categoryProduct:true}})\r\n        if(!findProducts) throw new HttpException(404,\"Products not found\")\r\n        return findProducts\r\n    }\r\n\r\n    static async getById(id: number){\r\n        const findProduct = await prisma.product.findUnique({where:{id},include:{rates:{include:{user:true}},categoryProduct:true}})\r\n        if(!findProduct) throw new HttpException(404,\"Product not found\")\r\n        return findProduct\r\n    }\r\n\r\n\r\n    static async save(product: Product, categoriesId: number[]){        \r\n        return await prisma.product.create({data:{...product,categoryProduct:{connect:{idCategory:categoriesId[0]}}}})\r\n    }\r\n\r\n    static async delete(id: number){\r\n        const findProduct = await prisma.product.findUnique({where:{id}})\r\n        if(!findProduct) throw new HttpException(404,\"Product not found\")\r\n        return await prisma.product.delete({where:{id}})\r\n    }\r\n\r\n    static async update(product: Product){\r\n        const {id} = product\r\n        const findProduct = await prisma.product.findUnique({where:{id}})\r\n        if(!findProduct) throw new HttpException(404,\"Product not found\")\r\n        return await prisma.product.update({where:{id},data:{...product}})\r\n    }\r\n\r\n\r\n\r\n\r\n}"],"names":["HttpException","prisma","ProductService","getAll","findProducts","product","findMany","include","rates","categoryProduct","getById","id","findProduct","findUnique","where","user","save","categoriesId","create","data","connect","idCategory","delete","update"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,SAASA,aAAa,QAAQ,8BAA6B;AAE3D,SAAQC,MAAM,QAAO,mBAAkB;AAEvC,OAAO,IAAA,AAAMC,+BAAN;;aAAMA;gCAAAA;;kBAAAA;;YAEIC,KAAAA;mBAAb,SAAaA;uBAAb,oBAAA;wBACUC;;;;gCAAe;;oCAAMH,OAAOI,OAAO,CAACC,QAAQ,CAAC;wCAACC,SAAQ;4CAACC,OAAM;4CAAKC,iBAAgB;wCAAI;oCAAC;;;gCAAvFL,eAAe;gCACrB,IAAG,CAACA,cAAc,MAAM,IAAIJ,cAAc,KAAI;gCAC9C;;oCAAOI;;;;gBACX;;;;YAEaM,KAAAA;mBAAb,SAAaA,QAAQC,EAAU;uBAA/B,oBAAA;wBACUC;;;;gCAAc;;oCAAMX,OAAOI,OAAO,CAACQ,UAAU,CAAC;wCAACC,OAAM;4CAACH,IAAAA;wCAAE;wCAAEJ,SAAQ;4CAACC,OAAM;gDAACD,SAAQ;oDAACQ,MAAK;gDAAI;4CAAC;4CAAEN,iBAAgB;wCAAI;oCAAC;;;gCAApHG,cAAc;gCACpB,IAAG,CAACA,aAAa,MAAM,IAAIZ,cAAc,KAAI;gCAC7C;;oCAAOY;;;;gBACX;;;;YAGaI,KAAAA;mBAAb,SAAaA,KAAKX,OAAgB,EAAEY,YAAsB;uBAA1D,oBAAA;;;;gCACW;;oCAAMhB,OAAOI,OAAO,CAACa,MAAM,CAAC;wCAACC,MAAK,wCAAId;4CAAQI,iBAAgB;gDAACW,SAAQ;oDAACC,YAAWJ,YAAY,CAAC,EAAE;gDAAA;4CAAC;;oCAAE;;;gCAA5G;;oCAAO;;;;gBACX;;;;YAEaK,KAAAA;mBAAb,SAAaA,QAAOX,EAAU;uBAA9B,oBAAA;wBACUC;;;;gCAAc;;oCAAMX,OAAOI,OAAO,CAACQ,UAAU,CAAC;wCAACC,OAAM;4CAACH,IAAAA;wCAAE;oCAAC;;;gCAAzDC,cAAc;gCACpB,IAAG,CAACA,aAAa,MAAM,IAAIZ,cAAc,KAAI;gCACtC;;oCAAMC,OAAOI,OAAO,CAACiB,MAAM,CAAC;wCAACR,OAAM;4CAACH,IAAAA;wCAAE;oCAAC;;;gCAA9C;;oCAAO;;;;gBACX;;;;YAEaY,KAAAA;mBAAb,SAAaA,OAAOlB,OAAgB;uBAApC,oBAAA;wBACWM,IACDC;;;;gCADCD,KAAMN,QAANM;gCACa;;oCAAMV,OAAOI,OAAO,CAACQ,UAAU,CAAC;wCAACC,OAAM;4CAACH,IAAAA;wCAAE;oCAAC;;;gCAAzDC,cAAc;gCACpB,IAAG,CAACA,aAAa,MAAM,IAAIZ,cAAc,KAAI;gCACtC;;oCAAMC,OAAOI,OAAO,CAACkB,MAAM,CAAC;wCAACT,OAAM;4CAACH,IAAAA;wCAAE;wCAAEQ,MAAK,mBAAId;oCAAQ;;;gCAAhE;;oCAAO;;;;gBACX;;;;WA9BSH;IAmCZ"}