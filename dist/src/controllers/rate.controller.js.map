{"version":3,"sources":["../../../src/controllers/rate.controller.ts"],"sourcesContent":["import { NextFunction, Request,Response } from \"express\"\r\nimport { RateService } from \"../services/rate.service\"\r\nimport { HttpException } from \"../exceptions/httpException\"\r\n\r\nexport class RateController{\r\n\r\n    static async getAll(req: Request, res:Response, next:NextFunction){\r\n        try{\r\n            const products = await RateService.getAll()\r\n            res.status(201).json(products)\r\n        }catch(error){\r\n            next(error)\r\n        }\r\n    }\r\n\r\n    static async getByProductId(req: Request, res:Response, next:NextFunction){\r\n        try{\r\n            const id = req.body\r\n            const rate = await RateService.getByProductId(id)\r\n            res.status(201).json(rate)\r\n        }catch(error){\r\n            next(error)\r\n        }\r\n    }\r\n\r\n    static async getAvgByProductId(req: Request, res:Response, next:NextFunction){\r\n        try{\r\n            const id = req.body\r\n            const rate = await RateService.getAvgByProductId(id)\r\n            res.status(201).json(rate)\r\n        }catch(error){\r\n            next(error)\r\n        }\r\n    }\r\n\r\n\r\n    \r\n    static async getByUserId(req: Request, res:Response, next:NextFunction){\r\n        try{\r\n            if(!req.user)return\r\n            const id = req.user.id\r\n            const rate = await RateService.getByUserId(id)\r\n            res.status(201).json(rate)\r\n        }catch(error){\r\n            next(error)\r\n        }\r\n    }\r\n\r\n    static async getByIds(req: Request, res:Response, next:NextFunction){\r\n        try{\r\n            if(!req.user)return\r\n            const idProduct = req.body\r\n            const idUser = req.user.id\r\n            const rate = await RateService.getByIds(idUser,idProduct)\r\n            res.status(201).json(rate)\r\n        }catch(error){\r\n            next(error)\r\n        }\r\n    }\r\n\r\n    static async save(req: Request, res:Response, next:NextFunction){\r\n        try{\r\n            const rate = req.body\r\n            if(!req.user)return\r\n            rate.idUser = req.user.id\r\n            const result = await RateService.save(rate)\r\n            res.status(201).json(result)\r\n        }catch(error){\r\n            next(error)\r\n        }\r\n    }\r\n\r\n\r\n\r\n    static async delete(req: Request, res:Response, next:NextFunction){\r\n        try{\r\n            const idProduct = req.body\r\n            if(!req.user)return\r\n            const idUser = req.user.id\r\n            const result = await RateService.delete(idUser,idProduct)\r\n            res.status(201).json(result)\r\n        }catch(error){\r\n            next(error)\r\n        }\r\n    }\r\n\r\n\r\n\r\n}"],"names":["RateController","getAll","req","res","next","products","RateService","status","json","error","getByProductId","id","body","rate","getAvgByProductId","getByUserId","user","getByIds","idProduct","idUser","save","result","delete"],"mappings":";;;;+BAIaA;;;eAAAA;;;6BAHe;AAGrB,IAAA,AAAMA,iBAAN,MAAMA;IAET,aAAaC,OAAOC,GAAY,EAAEC,GAAY,EAAEC,IAAiB,EAAC;QAC9D,IAAG;YACC,MAAMC,WAAW,MAAMC,wBAAW,CAACL,MAAM;YACzCE,IAAII,MAAM,CAAC,KAAKC,IAAI,CAACH;QACzB,EAAC,OAAMI,OAAM;YACTL,KAAKK;QACT;IACJ;IAEA,aAAaC,eAAeR,GAAY,EAAEC,GAAY,EAAEC,IAAiB,EAAC;QACtE,IAAG;YACC,MAAMO,KAAKT,IAAIU,IAAI;YACnB,MAAMC,OAAO,MAAMP,wBAAW,CAACI,cAAc,CAACC;YAC9CR,IAAII,MAAM,CAAC,KAAKC,IAAI,CAACK;QACzB,EAAC,OAAMJ,OAAM;YACTL,KAAKK;QACT;IACJ;IAEA,aAAaK,kBAAkBZ,GAAY,EAAEC,GAAY,EAAEC,IAAiB,EAAC;QACzE,IAAG;YACC,MAAMO,KAAKT,IAAIU,IAAI;YACnB,MAAMC,OAAO,MAAMP,wBAAW,CAACQ,iBAAiB,CAACH;YACjDR,IAAII,MAAM,CAAC,KAAKC,IAAI,CAACK;QACzB,EAAC,OAAMJ,OAAM;YACTL,KAAKK;QACT;IACJ;IAIA,aAAaM,YAAYb,GAAY,EAAEC,GAAY,EAAEC,IAAiB,EAAC;QACnE,IAAG;YACC,IAAG,CAACF,IAAIc,IAAI,EAAC;YACb,MAAML,KAAKT,IAAIc,IAAI,CAACL,EAAE;YACtB,MAAME,OAAO,MAAMP,wBAAW,CAACS,WAAW,CAACJ;YAC3CR,IAAII,MAAM,CAAC,KAAKC,IAAI,CAACK;QACzB,EAAC,OAAMJ,OAAM;YACTL,KAAKK;QACT;IACJ;IAEA,aAAaQ,SAASf,GAAY,EAAEC,GAAY,EAAEC,IAAiB,EAAC;QAChE,IAAG;YACC,IAAG,CAACF,IAAIc,IAAI,EAAC;YACb,MAAME,YAAYhB,IAAIU,IAAI;YAC1B,MAAMO,SAASjB,IAAIc,IAAI,CAACL,EAAE;YAC1B,MAAME,OAAO,MAAMP,wBAAW,CAACW,QAAQ,CAACE,QAAOD;YAC/Cf,IAAII,MAAM,CAAC,KAAKC,IAAI,CAACK;QACzB,EAAC,OAAMJ,OAAM;YACTL,KAAKK;QACT;IACJ;IAEA,aAAaW,KAAKlB,GAAY,EAAEC,GAAY,EAAEC,IAAiB,EAAC;QAC5D,IAAG;YACC,MAAMS,OAAOX,IAAIU,IAAI;YACrB,IAAG,CAACV,IAAIc,IAAI,EAAC;YACbH,KAAKM,MAAM,GAAGjB,IAAIc,IAAI,CAACL,EAAE;YACzB,MAAMU,SAAS,MAAMf,wBAAW,CAACc,IAAI,CAACP;YACtCV,IAAII,MAAM,CAAC,KAAKC,IAAI,CAACa;QACzB,EAAC,OAAMZ,OAAM;YACTL,KAAKK;QACT;IACJ;IAIA,aAAaa,OAAOpB,GAAY,EAAEC,GAAY,EAAEC,IAAiB,EAAC;QAC9D,IAAG;YACC,MAAMc,YAAYhB,IAAIU,IAAI;YAC1B,IAAG,CAACV,IAAIc,IAAI,EAAC;YACb,MAAMG,SAASjB,IAAIc,IAAI,CAACL,EAAE;YAC1B,MAAMU,SAAS,MAAMf,wBAAW,CAACgB,MAAM,CAACH,QAAOD;YAC/Cf,IAAII,MAAM,CAAC,KAAKC,IAAI,CAACa;QACzB,EAAC,OAAMZ,OAAM;YACTL,KAAKK;QACT;IACJ;AAIJ"}