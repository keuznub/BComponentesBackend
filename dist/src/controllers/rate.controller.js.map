{"version":3,"sources":["../../../src/controllers/rate.controller.ts"],"sourcesContent":["import { NextFunction, Request,Response } from \"express\"\r\nimport { RateService } from \"../services/rate.service\"\r\nimport { HttpException } from \"../exceptions/httpException\"\r\n\r\nexport class RateController{\r\n\r\n    static async getAll(req: Request, res:Response, next:NextFunction){\r\n        try{\r\n            const products = await RateService.getAll()\r\n            res.status(201).json(products)\r\n        }catch(error){\r\n            next(error)\r\n        }\r\n    }\r\n\r\n    static async getByProductId(req: Request, res:Response, next:NextFunction){\r\n        try{\r\n            const id = req.body\r\n            const rate = await RateService.getByProductId(id)\r\n            res.status(201).json(rate)\r\n        }catch(error){\r\n            next(error)\r\n        }\r\n    }\r\n\r\n    static async getAvgByProductId(req: Request, res:Response, next:NextFunction){\r\n        try{\r\n            const id = req.body\r\n            const rate = await RateService.getAvgByProductId(id)\r\n            res.status(201).json(rate)\r\n        }catch(error){\r\n            next(error)\r\n        }\r\n    }\r\n\r\n\r\n    \r\n    static async getByUserId(req: Request, res:Response, next:NextFunction){\r\n        try{\r\n            const id = req.user.id\r\n            const rate = await RateService.getByUserId(id)\r\n            res.status(201).json(rate)\r\n        }catch(error){\r\n            next(error)\r\n        }\r\n    }\r\n\r\n    static async getByIds(req: Request, res:Response, next:NextFunction){\r\n        try{\r\n            const idProduct = req.body\r\n            const idUser = req.user.id\r\n            const rate = await RateService.getByIds(idUser,idProduct)\r\n            res.status(201).json(rate)\r\n        }catch(error){\r\n            next(error)\r\n        }\r\n    }\r\n\r\n    static async save(req: Request, res:Response, next:NextFunction){\r\n        try{\r\n            const rate = req.body\r\n            rate.idUser = req.user.id\r\n            const result = await RateService.save(rate)\r\n            res.status(201).json(result)\r\n        }catch(error){\r\n            next(error)\r\n        }\r\n    }\r\n\r\n\r\n\r\n    static async delete(req: Request, res:Response, next:NextFunction){\r\n        try{\r\n            const idProduct = req.body\r\n            const idUser = req.user.id\r\n            const result = await RateService.delete(idUser,idProduct)\r\n            res.status(201).json(result)\r\n        }catch(error){\r\n            next(error)\r\n        }\r\n    }\r\n\r\n\r\n\r\n}"],"names":["RateService","RateController","getAll","req","res","next","products","error","status","json","getByProductId","id","rate","body","getAvgByProductId","getByUserId","user","getByIds","idProduct","idUser","save","result","delete"],"mappings":"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"}