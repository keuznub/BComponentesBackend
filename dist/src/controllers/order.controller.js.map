{"version":3,"sources":["../../../src/controllers/order.controller.ts"],"sourcesContent":["import { NextFunction, Request,Response } from \"express\"\r\nimport { OrderService } from \"../services/order.service\"\r\nimport { HttpException } from \"../exceptions/httpException\"\r\nimport { OrderProduct } from \"@prisma/client\"\r\n\r\nexport class OrderController{\r\n\r\n    static async getAll(req: Request, res:Response, next:NextFunction){\r\n        try{\r\n            const products = await OrderService.getAll()\r\n            res.status(201).json(products)\r\n        }catch(error){\r\n            next(error)\r\n        }\r\n    }\r\n\r\n    static async getById(req: Request, res:Response, next:NextFunction){\r\n        try{\r\n            const id = Number.parseInt(req.params.id)\r\n            if(isNaN(id)) throw new HttpException(400,\"Bad request\")\r\n            const rate = await OrderService.getById(id)\r\n            res.status(201).json(rate)\r\n        }catch(error){\r\n            next(error)\r\n        }\r\n    }\r\n\r\n    static async save(req: Request, res:Response, next:NextFunction){\r\n        try{\r\n            const orderProduct : OrderProduct[] = req.body\r\n            const idUser = req.user.id\r\n            const result = await OrderService.save(orderProduct, idUser)\r\n            res.status(201).json(result)\r\n        }catch(error){\r\n            next(error)\r\n        }\r\n    }\r\n\r\n\r\n\r\n    static async delete(req: Request, res:Response, next:NextFunction){\r\n        try{\r\n            const id = Number.parseInt(req.params.id)\r\n            if(isNaN(id)) throw new HttpException(400,\"Bad request\")\r\n            const result = await OrderService.delete(id)\r\n            res.status(201).json(result)\r\n        }catch(error){\r\n            next(error)\r\n        }\r\n    }\r\n\r\n    static async update(req: Request, res:Response, next:NextFunction){\r\n        try{\r\n            const id = Number.parseInt(req.params.id)\r\n            if(isNaN(id)) throw new HttpException(400,\"Bad request\")\r\n            const order = req.body\r\n            order.id = id\r\n            const result = await OrderService.update(order)\r\n            res.status(201).json(result)\r\n        }catch(error){\r\n            next(error)\r\n        }\r\n    }\r\n\r\n\r\n}"],"names":["OrderService","HttpException","OrderController","getAll","req","res","next","products","error","status","json","getById","id","rate","Number","parseInt","params","isNaN","save","orderProduct","idUser","result","body","user","delete","update","order"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,SAASA,YAAY,QAAQ,4BAA2B;AACxD,SAASC,aAAa,QAAQ,8BAA6B;AAG3D,OAAO,IAAA,AAAMC,gCAAN;;aAAMA;gCAAAA;;kBAAAA;;YAEIC,KAAAA;mBAAb,SAAaA,OAAOC,GAAY,EAAEC,GAAY,EAAEC,IAAiB;uBAAjE,oBAAA;wBAEcC,UAEHC;;;;;;;;;;gCAFc;;oCAAMR,aAAaG,MAAM;;;gCAApCI,WAAW;gCACjBF,IAAII,MAAM,CAAC,KAAKC,IAAI,CAACH;;;;;;gCAClBC;gCACHF,KAAKE;;;;;;;;;;;gBAEb;;;;YAEaG,KAAAA;mBAAb,SAAaA,QAAQP,GAAY,EAAEC,GAAY,EAAEC,IAAiB;uBAAlE,oBAAA;wBAEcM,IAEAC,MAEHL;;;;;;;;;;gCAJGI,KAAKE,OAAOC,QAAQ,CAACX,IAAIY,MAAM,CAACJ,EAAE;gCACxC,IAAGK,MAAML,KAAK,MAAM,IAAIX,cAAc,KAAI;gCAC7B;;oCAAMD,aAAaW,OAAO,CAACC;;;gCAAlCC,OAAO;gCACbR,IAAII,MAAM,CAAC,KAAKC,IAAI,CAACG;;;;;;gCAClBL;gCACHF,KAAKE;;;;;;;;;;;gBAEb;;;;YAEaU,KAAAA;mBAAb,SAAaA,KAAKd,GAAY,EAAEC,GAAY,EAAEC,IAAiB;uBAA/D,oBAAA;wBAEca,cACAC,QACAC,QAEHb;;;;;;;;;;gCAJGW,eAAgCf,IAAIkB,IAAI;gCACxCF,SAAShB,IAAImB,IAAI,CAACX,EAAE;gCACX;;oCAAMZ,aAAakB,IAAI,CAACC,cAAcC;;;gCAA/CC,SAAS;gCACfhB,IAAII,MAAM,CAAC,KAAKC,IAAI,CAACW;;;;;;gCAClBb;gCACHF,KAAKE;;;;;;;;;;;gBAEb;;;;YAIagB,KAAAA;mBAAb,SAAaA,QAAOpB,GAAY,EAAEC,GAAY,EAAEC,IAAiB;uBAAjE,oBAAA;wBAEcM,IAEAS,QAEHb;;;;;;;;;;gCAJGI,KAAKE,OAAOC,QAAQ,CAACX,IAAIY,MAAM,CAACJ,EAAE;gCACxC,IAAGK,MAAML,KAAK,MAAM,IAAIX,cAAc,KAAI;gCAC3B;;oCAAMD,aAAawB,MAAM,CAACZ;;;gCAAnCS,SAAS;gCACfhB,IAAII,MAAM,CAAC,KAAKC,IAAI,CAACW;;;;;;gCAClBb;gCACHF,KAAKE;;;;;;;;;;;gBAEb;;;;YAEaiB,KAAAA;mBAAb,SAAaA,OAAOrB,GAAY,EAAEC,GAAY,EAAEC,IAAiB;uBAAjE,oBAAA;wBAEcM,IAEAc,OAEAL,QAEHb;;;;;;;;;;gCANGI,KAAKE,OAAOC,QAAQ,CAACX,IAAIY,MAAM,CAACJ,EAAE;gCACxC,IAAGK,MAAML,KAAK,MAAM,IAAIX,cAAc,KAAI;gCACpCyB,QAAQtB,IAAIkB,IAAI;gCACtBI,MAAMd,EAAE,GAAGA;gCACI;;oCAAMZ,aAAayB,MAAM,CAACC;;;gCAAnCL,SAAS;gCACfhB,IAAII,MAAM,CAAC,KAAKC,IAAI,CAACW;;;;;;gCAClBb;gCACHF,KAAKE;;;;;;;;;;;gBAEb;;;;WAzDSN;IA4DZ"}