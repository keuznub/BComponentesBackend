{"version":3,"sources":["../../../src/middlewares/auth.middleware.ts"],"sourcesContent":["import { NextFunction,  Request, Response } from \"express\"\r\nimport {CustomJwtPayload} from '../utils/CustomJwtPayload'\r\nimport { HttpException} from '../exceptions/httpException'\r\nimport jwt from 'jsonwebtoken'\r\nimport { SourceTextModule } from \"vm\"\r\n\r\nconst TOKEN_PASSWORD = process.env.TOKEN_PASSWORD || \"pass\"\r\n\r\n\r\nexport function isAuthenticate(req:Request, res:Response, next:NextFunction){\r\n    const tokenReceived = req.cookies.token\r\n    if(!tokenReceived) next(new HttpException(403, \"Access Denied\"))\r\n    try{\r\n        const tokenDecodificado = jwt.verify(tokenReceived,TOKEN_PASSWORD)\r\n        req.user = tokenDecodificado as CustomJwtPayload\r\n        next()\r\n    }catch(error){\r\n        next(error)\r\n    }\r\n}"],"names":["HttpException","jwt","TOKEN_PASSWORD","process","env","isAuthenticate","req","res","next","tokenReceived","cookies","token","tokenDecodificado","verify","user","error"],"mappings":"AAEA,SAASA,aAAa,QAAO,8BAA6B;AAC1D,OAAOC,SAAS,eAAc;AAG9B,IAAMC,iBAAiBC,QAAQC,GAAG,CAACF,cAAc,IAAI;AAGrD,OAAO,SAASG,eAAeC,GAAW,EAAEC,GAAY,EAAEC,IAAiB;IACvE,IAAMC,gBAAgBH,IAAII,OAAO,CAACC,KAAK;IACvC,IAAG,CAACF,eAAeD,KAAK,IAAIR,cAAc,KAAK;IAC/C,IAAG;QACC,IAAMY,oBAAoBX,IAAIY,MAAM,CAACJ,eAAcP;QACnDI,IAAIQ,IAAI,GAAGF;QACXJ;IACJ,EAAC,OAAMO,OAAM;QACTP,KAAKO;IACT;AACJ"}