{"version":3,"sources":["../../../src/middlewares/auth.middleware.ts"],"sourcesContent":["import { NextFunction,  Request, Response } from \"express\"\r\nimport {CustomJwtPayload} from '../utils/CustomJwtPayload'\r\nimport { HttpException} from '../exceptions/httpException'\r\nimport jwt from 'jsonwebtoken'\r\nimport { SourceTextModule } from \"vm\"\r\n\r\nconst TOKEN_PASSWORD = process.env.TOKEN_PASSWORD || \"pass\"\r\n\r\n\r\nexport function isAuthenticate(req:Request, res:Response, next:NextFunction){\r\n    const tokenReceived = req.cookies.token\r\n    if(!tokenReceived) next(new HttpException(403, \"Access Denied\"))\r\n    try{\r\n        const tokenDecodificado = jwt.verify(tokenReceived,TOKEN_PASSWORD)\r\n        req.user = tokenDecodificado as CustomJwtPayload\r\n        next()\r\n    }catch(error){\r\n        next(error)\r\n    }\r\n}\r\n\r\n\r\n"],"names":["isAuthenticate","TOKEN_PASSWORD","process","env","req","res","next","tokenReceived","cookies","token","HttpException","tokenDecodificado","jwt","verify","user","error"],"mappings":";;;;+BASgBA;;;eAAAA;;;+BAPa;qEACb;;;;;;AAGhB,MAAMC,iBAAiBC,QAAQC,GAAG,CAACF,cAAc,IAAI;AAG9C,SAASD,eAAeI,GAAW,EAAEC,GAAY,EAAEC,IAAiB;IACvE,MAAMC,gBAAgBH,IAAII,OAAO,CAACC,KAAK;IACvC,IAAG,CAACF,eAAeD,KAAK,IAAII,4BAAa,CAAC,KAAK;IAC/C,IAAG;QACC,MAAMC,oBAAoBC,qBAAG,CAACC,MAAM,CAACN,eAAcN;QACnDG,IAAIU,IAAI,GAAGH;QACXL;IACJ,EAAC,OAAMS,OAAM;QACTT,KAAKS;IACT;AACJ"}