{"version":3,"sources":["../../../src/middlewares/isAdmin.middleware.ts"],"sourcesContent":["import { NextFunction, Request, Response } from \"express\"\r\nimport { HttpException } from \"../exceptions/httpException\";\r\n\r\nexport function isAdmin(req:Request, res:Response, next:NextFunction){\r\n    try{\r\n        const role = req.user.role\r\n        console.log(role)\r\n        if(role!=\"admin\") next(new HttpException(403, \"Not permission\"))\r\n        next()\r\n    }catch(error){\r\n        next(error)\r\n    }\r\n}"],"names":["HttpException","isAdmin","req","res","next","role","user","console","log","error"],"mappings":"AACA,SAASA,aAAa,QAAQ,8BAA8B;AAE5D,OAAO,SAASC,QAAQC,GAAW,EAAEC,GAAY,EAAEC,IAAiB;IAChE,IAAG;QACC,IAAMC,OAAOH,IAAII,IAAI,CAACD,IAAI;QAC1BE,QAAQC,GAAG,CAACH;QACZ,IAAGA,QAAM,SAASD,KAAK,IAAIJ,cAAc,KAAK;QAC9CI;IACJ,EAAC,OAAMK,OAAM;QACTL,KAAKK;IACT;AACJ"}